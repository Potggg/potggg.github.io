<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ë…¸ë°”ì„œë²„ í˜íŠ¸ ê³„ì‚°ê¸°</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/decimal.js/10.6.0/decimal.min.js"></script>
<link rel="shortcut icon" href="#">
<style>
  /* ë°”ë”” ë ˆë²¨ í”Œë¡œíŒ… íˆ´íŒ */
  .floating-tip{
    position: fixed; z-index: 9999; max-width: 360px;
    background:#0b1320; color:#cfe1ff; border:1px solid #2b3a55;
    border-radius:10px; padding:8px 10px; font-size:12px; line-height:1.35;
    box-shadow:0 8px 24px rgba(0,0,0,.35);
    pointer-events:none; white-space:normal; word-break:keep-all;
    opacity:0; transform: translateY(4px);
    transition: opacity .12s ease, transform .12s ease;
  }
  .floating-tip.show{ opacity:1; transform: translateY(0); }
  .floating-tip::after{
    content:""; position:absolute; width:10px; height:10px; left:50%;
    transform: translateX(-50%) rotate(45deg);
    background:#0b1320; border-left:1px solid #2b3a55; border-top:1px solid #2b3a55;
  }
  .floating-tip[data-pos="top"]::after{ bottom:-5px; }
  .floating-tip[data-pos="bottom"]::after{ top:-5px; transform: translateX(-50%) rotate(225deg); }

  :root{
    --bg:#0f1115; --panel:#161a22; --muted:#8a9099; 
    --accent:#6aa0ff; /* ê¸°ì¡´ ì•…ì„¼íŠ¸ ìƒ‰ìƒ ìœ ì§€ ë˜ëŠ” #7fd4ff (ë°ì€ ì²­ìƒ‰) ì‚¬ìš© */
    --ok:#35c759; --warn:#ffb300; --bad:#ff5171; --chip:#232a36;
    --ring:#1f2530; --text:#e8ecf3; --ring-size: 60px; --ring-thickness: 10px;
    --hud-speed: 120; /* HUD ë„ëŠ” ì†ë„(px/s) */
    --glow: 8px;
    /* [ì¶”ê°€] í™€ë¡œê·¸ë¨/ìŠ¤ìœ• ë³€ìˆ˜ */
    --sweep-speed: 2.5s; /* ëŠë¦¬ê³  ë¶€ë“œëŸ½ê²Œ */
    --sweep-blur: 2.5px; /* ë¶€ë“œëŸ¬ìš´ ì‚°ë€ íš¨ê³¼ */
    --sweep-opacity: 0.4; /* í¬ë¯¸í•˜ê²Œ */
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    background:linear-gradient(180deg,#0f1115 0%,#0c0f14 100%); color:var(--text);
  }
  header{
    padding:0; /* ê¸°ì¡´ padding:16px 20px; ì œê±° */
    border-bottom:1px solid #232a36; 
    background:rgba(0,0,0,.2);
    position:static; top:auto; left:auto; right:auto; z-index:10;
  }
  .wrap{ max-width:1100px; margin:0 auto; }
  .header-inner{ display:flex; align-items:center; justify-content:space-between; padding:16px 20px; }
  h1{margin:0 0 6px; font-size:18px}
  .brand{font-weight:700; letter-spacing:.3px}
  .ver{color:var(--muted); font-size:13.3333px; display:flex; align-items:center; gap:10px}
  .grid{ max-width:1100px; margin:20px auto 4px; padding:0 16px; display:grid; gap:16px; grid-template-columns: 1fr 1fr; }
  @media (max-width: 980px){ .grid{grid-template-columns:1fr} }
  @media (max-width: 600px) { /* ëª¨ë°”ì¼ í™˜ê²½ìœ¼ë¡œ ê°„ì£¼í•  ìµœëŒ€ ë„ˆë¹„ */
    .header-inner{
      flex-direction: column; /* ë‚´ìš©ì„ ìˆ˜ì§ìœ¼ë¡œ ìŒ“ìŒ */
      align-items: flex-start; /* ì™¼ìª½ ì •ë ¬ */
      padding-bottom: 12px; /* ì œëª©/ë²„ì „ê³¼ ì•„ë˜ ë©”ë‰´ ì‚¬ì´ì˜ ê°„ê²© ì¤„ì´ê¸° */
    }
    .title{
      margin-bottom: 8px; /* ì œëª© ë¸”ë¡ê³¼ ë©”ë‰´ ì‚¬ì´ ê°„ê²© ì¶”ê°€ */
    }
    .ver{
      width: 100%; /* ë©”ë‰´ ì»¨í…Œì´ë„ˆ ë„ˆë¹„ 100% í™•ë³´ */
      justify-content: space-around; /* ë²„íŠ¼ë“¤ì„ ê°€ë¡œë¡œ ê· ë“±í•˜ê²Œ ë°°ì¹˜ (ì„ íƒ ì‚¬í•­) */
      display: flex; /* ë©”ë‰´ ë‚´ë¶€ ë²„íŠ¼ë“¤ì„ flexë¡œ ì²˜ë¦¬ */
    }
    /* ë²„íŠ¼ ê°„ ê°„ê²©ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ */
    .ver .btn.ghost {
      flex: 1; /* ë²„íŠ¼ë“¤ì´ ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ê· ë“±í•œ ê³µê°„ì„ ì°¨ì§€í•˜ë„ë¡ í•¨ */
      text-align: center;
      padding: 10px 0; /* ìƒí•˜ íŒ¨ë”© ìœ ì§€, ì¢Œìš° íŒ¨ë”© ì œê±° */
      margin: 0 4px; /* ë²„íŠ¼ ê°„ ì‘ì€ ê°„ê²© ì¶”ê°€ */
    }
  }
  .card{background:var(--panel); border:1px solid #232a36; border-radius:14px; padding:16px; box-shadow:0 6px 24px rgba(0,0,0,.25);}
  .card h3{margin:4px 0 12px 0; font-size:16px}
  .row{display:flex; gap:8px; flex-wrap:wrap}
  .col{flex:1 1 0}
  label{display:block; font-size:12px; color:var(--muted); margin:6px 0 4px 2px}
  input[type="number"], input[type="text"]{
    width:100%; padding:10px 12px; border-radius:10px; border:1px solid #2a3040;
    background:#0e1218; color:var(--text); outline:none;
  }
  input[readonly]{opacity:.7; cursor:not-allowed}
  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
  .btn{ padding:10px 14px; border-radius:10px; border:1px solid #334055; cursor:pointer; background:#142033; color:#cfe1ff; font-weight:600; }
  .btn:hover{filter:brightness(1.1)}
  .btn.primary{ background:linear-gradient(180deg,#2b71ff,#1d56cc); border-color:transparent; color:white;}
  .btn.ghost{ background:transparent; text-decoration: none;}
  .btn-sm{padding:6px 10px; font-size:12px; border-radius:8px}
  .muted{color:var(--muted); font-size:12px}
  .chips{display:flex; gap:8px; flex-wrap:wrap}
  .chip{ background:var(--chip); color:#cfd6e3; border:1px solid #2b3242; border-radius:999px; padding:6px 10px; font-size:12px; cursor:pointer; }
  .chip.on{outline:2px solid var(--accent)}
  .kbd{display:inline-block; border:1px solid #404a5e; border-bottom-width:3px; padding:2px 6px; border-radius:6px; background:#0e131a; font-weight:700}
  .chooser{display:grid; grid-template-columns: 1fr; gap:8px}
  .list{ max-height:260px; overflow:auto; border:1px solid #2a3040; border-radius:10px; padding:6px; background:#0d1117; }
  .item{padding:8px 10px; border-radius:8px; cursor:pointer; display:flex; justify-content:space-between; align-items:center; transition: background .12s ease, outline-color .12s ease; font-size:12px;}
  .item:hover{background:#19202b}
  .item.selected{ background:#1b2535; outline:2px solid #30518d; }
  .tags{display:flex; gap:6px; align-items:center}
  .tag{font-size:11px;border:1px solid #2b3242;border-radius:999px;padding:2px 8px}
  .tag.ok{border-color:#275a34; background:#102214; color:#35c759}
  .tag.warn{border-color:#7a5b0e; background:#241a05; color:#ffb300}
  .tag.rank8{border-color:#2b4a82; background:#0d1a33; color:#88b5ff}
    /* â˜… ì¦ê²¨ì°¾ê¸° ë°°ì§€ */
  .tag.fav{cursor:pointer; user-select:none}
  .tag.fav.on{border-color:#6a5600; background:#221c05; color:#ffd24a}
  .kpis{display:grid; grid-template-columns: repeat(3, 1fr); gap:12px}

  @media (max-width: 720px){ .kpis{grid-template-columns: 1fr} }
  .kpi{ display:flex; gap:14px; align-items:center; border:1px solid #2a3040; border-radius:14px; padding:14px; background:radial-gradient(120px 120px at 20% -10%, #11224444, transparent); }
  .ringwrap{ position:relative; width:var(--ring-size); height:var(--ring-size); flex:0 0 var(--ring-size); }
  svg{ display:block; width:100%; height:100%; }
  .track{ stroke: var(--ring); fill:none; stroke-linecap: round; }
  .fill { stroke: var(--accent); fill:none; stroke-linecap: round; transition: stroke .25s ease, stroke-dashoffset .25s linear; }

  /* ì„±ê³µ ë§ HUD */
  .hud { filter: drop-shadow(0 0 var(--glow) rgba(160,200,255,.6)); }
  .tail{ stroke: #9fc3ff; stroke-linecap: round; opacity:.7; fill:none; }
  .core{ stroke: #fff;     stroke-linecap: round; fill:none; }
  .flare{ fill: #fff; opacity:.95; }
  /* ë„ë„›(ê¸°ë³¸ ê²Œì´ì§€) â€” í¬ê¸° ê³ ì • + ë§ˆìŠ¤í¬ë¡œ ì†ë¹ˆ ì› */
  .ring{
    width: var(--ring-size);
    height: var(--ring-size);
    flex: 0 0 var(--ring-size);
    position: relative;
    border-radius: 50%;
    overflow: hidden;
    isolation: isolate;
    --p: 0deg; /* JSì—ì„œ ì§„í–‰ê° ì„¤ì • */

/* [ìˆ˜ì •] ì½”ë‹‰ ê·¸ë¼ë””ì–¸íŠ¸ì— ì–‡ì€ ì¤„ë¬´ëŠ¬ ì¶”ê°€í•˜ì—¬ í™€ë¡œê·¸ë¨ íš¨ê³¼ */
  background: 
    repeating-conic-gradient(
      var(--accent) 0 var(--p), 
      var(--ring) calc(var(--p) + 0.5deg) /* 0.5deg ê°„ê²©ìœ¼ë¡œ ì¤„ë¬´ëŠ¬ ì¶”ê°€ */
    );
    
/* [ì¶”ê°€] ë¯¸ì„¸í•œ ê·¸ë¦¼ìë¡œ ë–  ìˆëŠ” ëŠë‚Œ ë¶€ì—¬ */
  box-shadow: 0 0 15px rgba(121, 248, 255, 0.15); 

/* ì† ë¹„ìš°ê¸°(ë„ë„›) ë§ˆìŠ¤í¬ */
  -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - var(--ring-thickness)), #000 0);
        mask: radial-gradient(farthest-side, transparent calc(100% - var(--ring-thickness)), #000 0);
}


  /* â˜… ì„±ê³µ ë§ì—ë§Œ HUD ìŠ¤ìœ• */
  #ringSuccess::after{
      content:"";
      position:absolute; inset:0;
      border-radius:50%;
      pointer-events:none;
      /* [ìˆ˜ì •] íˆ¬ëª…ë„ ë³€ìˆ˜ ì‚¬ìš© (ë§¤ìš° í¬ë¯¸í•˜ê²Œ) */
      opacity: calc(var(--sweep-on, 0) * var(--sweep-opacity)); 
      /* [ìˆ˜ì •] ë¸”ëŸ¬ ë³€ìˆ˜ ì‚¬ìš© (ë¶€ë“œëŸ¬ìš´ ì‚°ë€ íš¨ê³¼) */
      filter: blur(var(--sweep-blur)); 
      will-change: transform;
      /* [ìˆ˜ì •] ì†ë„ ë³€ìˆ˜ ì‚¬ìš© (ëŠë¦¬ê²Œ íšŒì „) */
      animation: ring-sweep var(--sweep-speed) linear infinite; 
  /* ì–‡ì€ ë¹› ì›¨ì§€ íŒ¨í„´ */
      background:
        repeating-conic-gradient(
          from -90deg,
          rgba(255,255,255,0)   0deg 6deg,
          rgba(255,255,255,.9)  6deg 7.2deg,
          rgba(255,255,255,0)  7.2deg 14.4deg
        );
  /* (1) ë„ë„› ëª¨ì–‘ìœ¼ë¡œ êµ¬ë© + (2) ì§„í–‰ê°ê¹Œì§€ë§Œ í‘œì‹œ */
      -webkit-mask-image:
        radial-gradient(farthest-side, transparent calc(100% - var(--ring-thickness)), #000 0),
        conic-gradient(#000 0 calc(var(--p) + .0001deg), transparent 0); /* 0deg ë²„ê·¸íšŒí”¼ìš© +Îµ */
      -webkit-mask-composite: source-in;
            mask-image:
        radial-gradient(farthest-side, transparent calc(100% - var(--ring-thickness)), #000 0),
        conic-gradient(#000 0 calc(var(--p) + .0001deg), transparent 0);
            mask-composite: intersect;
  }

  @keyframes ring-sweep{ to { transform: rotate(360deg); } }

/* (ì„ íƒ) ìˆ«ì í­ ê³ ì •í•´ì„œ ë ˆì´ì•„ì›ƒ í”ë“¤ë¦¼ ë°©ì§€ */
  #kpiSuccess, #kpiAppear{ display:inline-block; min-width: 9ch; font-variant-numeric: tabular-nums; }
  #kpiTries{   display:inline-block; min-width: 6ch; font-variant-numeric: tabular-nums; }

  .kpi strong{font-size:20px; color:var(--highlight)}
  .kpi small{display:block; color:var(--muted)}
  .table{width:100%; border-collapse:collapse; font-size:13px}
  .table th,.table td{border-bottom:1px solid #262d3a; padding:8px 6px; text-align:right}
  .table th:first-child,.table td:first-child{text-align:left}
  .badge{display:inline-block; min-width:34px; font-size:12px; text-align:center; padding:2px 6px; border-radius:6px; background:#223; border:1px solid #356}
  .ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}
  .footer{max-width:1100px; margin:0px auto 30px; padding:0 16px; color:var(--muted); font-size:12px}
  .imgbox{width:100%; aspect-ratio: 16/9; border:1px dashed #334055; border-radius:12px; display:grid; place-items:center; background:#0d1117; overflow:hidden;}
  .imgbox img{width:100%; height:100%; object-fit:cover; display:block}
  .stepper{display:flex; gap:6px; margin-top:6px}
    /* ìˆ«ì ìë¦¿ìˆ˜ ê³ ì • + ë“±í­ ìˆ«ì */
  #kpiSuccess, #kpiAppear{
    display:inline-block;
    min-width: 9ch;               /* "100.0000%" ì •ë„ë¥¼ ìˆ˜ìš© */
    font-variant-numeric: tabular-nums;
  }
  #kpiTries{
    display:inline-block;
    min-width: 6ch;               /* "123.45" ì •ë„ */
    font-variant-numeric: tabular-nums;
  }
  
/* === Toast === */
  .toastWrap{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:8px; font-size:12px; z-index:9999}
  .toast{background:#101826; border:1px solid #2a3a59; color:#cfe3ff; padding:10px 12px; border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,.3); opacity:0; transform:translateY(10px); transition: all .25s ease }
  .toast.show{opacity:1; transform:translateY(0)}

  #petList {
    max-height: 200px;
    overflow-y: auto;
  }
  
  /* [ìˆ˜ì • 1] ê²€ìƒ‰ ì…ë ¥ì°½ê³¼ ë²„íŠ¼ ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
  .pet-search-row {
    display: flex;
    align-items: center; /* ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
    gap: 8px;
    margin-top: 8px;
  }
  .pet-search-row .col {
    flex: 1;
  }

  @media (max-width: 600px) {
    #petList {
      max-height: 180px !important; 
    }
  }
</style>
</head>
<body>
<header>
  <div class="header-inner wrap">
    <div class="title">
      <h1>ë…¸ë°”ì„œë²„ í˜íŠ¸ ê³„ì‚°ê¸°</h1>
      <div class="muted">íŒ¨ì¹˜ë…¸íŠ¸ v5.0 ì ìš©</div>
    </div>
    <div class="ver">
      <a class="btn ghost" id="btnDict" href="./petsfilter.html">í˜íŠ¸ ì‚¬ì „</a>
      <a class="btn ghost" id="btnSimulator" href="./simulator.html">ì‹œë®¬ë ˆì´í„°</a>
      <a class="btn ghost" id="btnAdmin" href="./admin.html">ê´€ë¦¬ì</a>
    </div>
</header>

<div class="grid">
  <section class="card">
    <h3>â‘  í˜íŠ¸ ì„ íƒ</h3>
    <div class="row">
      <div class="col chooser">
        <label>ì´ˆì„± í‚¤íŒ¨ë“œ</label>
        <div id="chosung" class="chips"></div>

        <div class="row" style="margin-top:6px; align-items:center">
          <span class="muted" style="min-width:78px">ì„ íƒí•œ ì´ˆì„±</span>
          <div id="chosungTokens" class="chips" style="min-height:28px"></div>
        </div>

        <div class="row" style="margin-top:6px; align-items:center">
          <span class="muted" style="min-width:78px">ì¦ê²¨ì°¾ê¸°<br>(ìµœëŒ€ 5ê°œ)</span>
          <div id="favChips" class="chips" style="min-height:28px"></div>
        </div>

        <div class="pet-search-row">
          <div class="col">
            <input type="text" id="petSearch" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”." />
          </div>
          <button class="btn" id="btnClear">ì§€ìš°ê¸°</button>
        </div>
        <div class="list" id="petList"></div>
      </div>
    </div>
    <p class="muted" style="margin-top:8px">íŒ: ì´ˆì„±ë§Œ ëˆŒëŸ¬ë„ í›„ë³´ê°€ ë¹ ë¥´ê²Œ ê±¸ëŸ¬ì§‘ë‹ˆë‹¤. (ì˜ˆ: ë°˜ê¸°ë…¸ = <span class="kbd">ã…‚</span>â†’<span class="kbd">ã„±</span>)</p>
  </section>

  <section class="card">
    <h3>â‘¡ í˜íŠ¸ ì´ˆê¸°ì¹˜ ì…ë ¥</h3>

    <div class="row">
      <div class="col">
        <label>Sê¸‰ ì´ˆê¸°ì¹˜ (ì²´/ê³µ/ë°©/ìˆœ)</label>
        <div class="row">
          <div class="col"><input type="number" id="s0_hp"  step="0.01" readonly /></div>
          <div class="col"><input type="number" id="s0_atk" step="0.01" readonly /></div>
          <div class="col"><input type="number" id="s0_def" step="0.01" readonly /></div>
          <div class="col"><input type="number" id="s0_agi" step="0.01" readonly /></div>
        </div>

        <label style="margin-top:10px">Sê¸‰ ì„±ì¥ì¹˜ (ì²´/ê³µ/ë°©/ìˆœ)</label>
        <div class="row">
          <div class="col"><input type="number" id="sg_hp"  step="0.01" readonly /></div>
          <div class="col"><input type="number" id="sg_atk" step="0.01" readonly /></div>
          <div class="col"><input type="number" id="sg_def" step="0.01" readonly /></div>
          <div class="col"><input type="number" id="sg_agi" step="0.01" readonly /></div>
        </div>
      </div>
    </div>

    <hr style="border:none;border-top:1px solid #2a3040; margin:14px 0" />

    <div class="row">
      <div class="col">
        <label>1ë ˆë²¨ ì´ˆê¸°ì¹˜ (ì²´/ê³µ/ë°©/ìˆœ)</label>
        <div class="row">
          <div class="col">
            <input type="number" id="obs_hp"  step="1" min="0" max="100" />
            <div class="stepper">
              <button class="btn btn-sm" data-target="obs_hp" data-delta="-1">-1</button>
              <button class="btn btn-sm" data-target="obs_hp" data-delta="1">+1</button>
            </div>
          </div>
          <div class="col">
            <input type="number" id="obs_atk" step="1" min="0" max="100" />
            <div class="stepper">
              <button class="btn btn-sm" data-target="obs_atk" data-delta="-1">-1</button>
              <button class="btn btn-sm" data-target="obs_atk" data-delta="1">+1</button>
            </div>
          </div>
          <div class="col">
            <input type="number" id="obs_def" step="1" min="0" max="100" />
            <div class="stepper">
              <button class="btn btn-sm" data-target="obs_def" data-delta="-1">-1</button>
              <button class="btn btn-sm" data-target="obs_def" data-delta="1">+1</button>
            </div>
          </div>
          <div class="col">
            <input type="number" id="obs_agi" step="1" min="0" max="100" />
            <div class="stepper">
              <button class="btn btn-sm" data-target="obs_agi" data-delta="-1">-1</button>
              <button class="btn btn-sm" data-target="obs_agi" data-delta="1">+1</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row" style="margin-top:12px">
      <button class="btn primary" id="btnCalc">ê³„ì‚°</button>
      <button class="btn ghost" id="btnReset">ë¦¬ì…‹</button>
      <span class="muted" style="margin-left:auto">ìŠ¤í¬ë¡¤ ì—…/ë‹¤ìš´ìœ¼ë¡œ ìˆ˜ì¹˜ ì¡°ì • ê°€ëŠ¥</span>
    </div>
  </section>

<section class="card" id="resultCard">
<h3>â‘¢ ê²°ê³¼</h3>
<div class="kpis">
<div class="kpi">
<div class="ringwrap">
<svg viewBox="0 0 100 100" aria-hidden="true">
<defs>
<circle id="succPath" cx="50" cy="50" r="45"/>
<mask id="succMask" maskUnits="userSpaceOnUse">
<circle id="succMaskStroke" cx="50" cy="50" r="45"
fill="none" stroke="#fff" stroke-width="10" stroke-linecap="round"
transform="rotate(-90 50 50)"

stroke-dasharray="0 1" stroke-dashoffset="0"/>
</mask>
</defs>

<use href="#succPath" class="track" stroke-width="10" transform="rotate(-90 50 50)"/>
<use id="succFill" href="#succPath" class="fill" stroke-width="10"
transform="rotate(-90 50 50)" stroke-dasharray="0 1" stroke-dashoffset="0" style="stroke: none;"/>

<g id="succHUD" class="hud" mask="url(#succMask)" style="opacity: 0;">
<path id="succTail" class="tail" stroke-width="10"/>
<path id="succCore" class="core" stroke-width="6"/>
<circle id="succFlare" class="flare" r="3" cx="50" cy="5"/>
</g>
</svg>
</div>

<div>
<strong id="kpiSuccess">0.0000%</strong>
<small>8ë“±ê¸‰(í™˜ê°) í™•ë¥ </small>
</div>
</div>

<div class="kpi">
<div class="ringwrap">
<svg viewBox="0 0 100 100" aria-hidden="true">
<circle id="apPath" cx="50" cy="50" r="43" fill="none"/>
<use href="#apPath" class="track" stroke-width="10" transform="rotate(-90 50 50)"/>
<use id="apFill" href="#apPath" class="fill" stroke="#7fd4ff" stroke-width="10"
transform="rotate(-90 50 50)" stroke-dasharray="0 1" stroke-dashoffset="0" style="stroke: none;"/>
</svg>
</div>

<div>
<strong id="kpiAppear">0.000000%</strong>
<span id="apBadge" class="badge" style="display:none">2% â†‘</span>

<small>ì¶œí˜„ í™•ë¥ </small>
</div>
</div>

<div class="kpi">
<div class="ringwrap">
<svg viewBox="0 0 100 100" aria-hidden="true">
<circle id="trPath" cx="50" cy="50" r="43" fill="none"/>
<use href="#trPath" class="track" stroke-width="10" transform="rotate(-90 50 50)"/>
<use id="trFill" href="#trPath" class="fill" stroke="#999" stroke-width="10"
transform="rotate(-90 50 50)" stroke-dasharray="0 1" stroke-dashoffset="0" style="stroke: none;"/>
</svg>
</div>
        <div>
          <strong id="kpiTries">0íšŒ</strong>
          <small style="white-space: nowrap;">ê¸°ëŒ€ ì‹œë„</small>
        </div>
      </div>
    </div>

    <div style="margin-top:14px">
      <div class="row">
        <div class="col"><span class="muted">ì´ ë§¤ì¹­ :</span> <span class="badge" id="totMatches">0</span></div>
        <div class="col"><span class="muted">8ë“±ê¸‰ ë§¤ì¹­ :</span> <span class="badge" id="rank8Matches">0</span></div>
        <div class="col"><span class="muted">ì „ìˆ˜ê°’ :</span> <span class="badge">178,750</span></div>
      </div>
    </div>

<div id="dist" style="margin-top:12px"></div>
  </section>

  <section class="card">
    <div class="imgbox">
      <img src="https://stoneage001.com/theme/basic/img/noti_board15.jpg" alt="StoneAge Nova" loading="lazy" decoding="async"/>
    </div>
    <p class="muted" style="margin-top:8px">ì´ ê³„ì‚°ê¸°ëŠ” ê³¼ì¥(kokodas.)ë‹˜ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. </p>
    <style>
      #visitCounter {
        margin-top: 6px;
        font-weight: 600;
        font-size: 14px;
        color: #aab7cc;
      }
    </style>
    <div id="visitCounter">ë°©ë¬¸ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        // 1. í˜ì´ì§€ í‚¤ ìƒì„±
        const today = new Date();
        // YYYY_MM_DD í˜•ì‹ìœ¼ë¡œ í‚¤ ìƒì„±
        const dateKey = `${today.getFullYear()}_${today.getMonth() + 1}_${today.getDate()}`;
    
        // í˜„ì¬ ê²½ë¡œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í‚¤ ìƒì„± (ë£¨íŠ¸ ê²½ë¡œ('/')ëŠ” 'home'ìœ¼ë¡œ ì„¤ì •)
        const pathname = window.location.pathname;
        const baseKey = pathname === "/"
            ? "home"
            : pathname.replace(/\W+/g, "_").toLowerCase(); // ë¹„ë¬¸ìì—´ì„ '_'ë¡œ ëŒ€ì²´í•˜ê³  ì†Œë¬¸ìë¡œ ë³€í™˜

        const pageKey = `${baseKey}_${dateKey}`; // ëˆ„ì  ë°©ë¬¸ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ê³  ì‹¶ë‹¤ë©´,  _${dateKey} ë¶€ë¶„ì„ ì œê±°
    
        // 2. Worker í˜¸ì¶œ (í•„ìˆ˜ ìˆ˜ì •: POST ë©”ì„œë“œ ì‚¬ìš©)
        fetch(`https://page-counter.potg.workers.dev/hit/${pageKey}`, {
            method: 'POST', // ğŸš¨ í•„ìˆ˜ ìˆ˜ì •! Workerì˜ hit ì—”ë“œí¬ì¸íŠ¸ëŠ” ì´ì œ POSTë§Œ í—ˆìš©
            // bodyëŠ” í•„ìš” ì—†ì§€ë§Œ, ìš”ì²­ì´ POSTì„ì„ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.
        })
        .then(res => {
            // HTTP ìƒíƒœ ì½”ë“œê°€ 200ë²ˆëŒ€ê°€ ì•„ë‹ˆë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
            if (!res.ok) {
                // ì˜ˆ: 405 Method Not Allowed ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ
                throw new Error(`Worker Error: ${res.status} ${res.statusText}`);
            }
            return res.json();
        })
        .then(d => {
            // ê²°ê³¼ê°’ í‘œì‹œ
            const count = d.value || 0;
            document.getElementById("visitCounter").textContent =
                `ğŸ‘‹ ì˜¤ëŠ˜ ë°©ë¬¸ì ìˆ˜ : ${count.toLocaleString()}ëª…`;
        })
        .catch(err => {
            console.error("ë°©ë¬¸ì ì¹´ìš´í„° ì—ëŸ¬:", err);
            // ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©ìì—ê²Œ í‘œì‹œ
            document.getElementById("visitCounter").textContent = "ë°©ë¬¸ì ìˆ˜ ë¡œë“œ ì‹¤íŒ¨ ğŸ˜¢";
        });
    });
    </script>
</style>
  </section>
</div>

<div class="footer">
  <p>Â· â€œ8ë“±ê¸‰â€ì€ ë² ì´ìŠ¤ í•©ê³„ê°€ <b>+8</b>ì¸ ê²½ìš°ë§Œ ì§‘ê³„í•©ë‹ˆë‹¤. (ê° í•­ëª© ë²”ìœ„ âˆ’2..+2)</p>
</div>

  <div class="toastWrap" id="toastWrap"></div>

<script src="main.js"></script>

</body>
</html>
